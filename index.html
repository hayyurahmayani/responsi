<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

    <!-- Search CSS Library -->
    <link rel="stylesheet" href="assets/plugins/leaflet-search/leaflet-search.css" />

    <!-- Geolocation CSS Library for Plugin -->
    <link rel="stylesheet"
        href="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.css" />

    <!-- Leaflet Mouse Position CSS Library -->
    <link rel="stylesheet" href="assets/plugins/leaflet-mouseposition/L.Control.MousePosition.css" />

    <!-- Leaflet Measure CSS Library -->
    <link rel="stylesheet" href="assets/plugins/leaflet-measure/leaflet-measure.css" />

    <!-- EasyPrint CSS Library -->
    <link rel="stylesheet" href="assets/plugins/leaflet-easyprint/easyPrint.css" />

    <!-- MarkerCluster CSS Library -->
    <link rel="stylesheet" href="assets/plugins/leaflet-markercluster/MarkerCluster.css" />
    <link rel="stylesheet" href="assets/plugins/leaflet-markercluster/MarkerCluster.Default.css" />

    <!-- Routing CSS Library -->
    <link rel="stylesheet" href="assets/plugins/leaflet-routing/leaflet-routing-machine.css" />



    <style>
        #map {
            height: 97.5vh;
        }

        *.info {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            text-align: center;
        }

        .info h2 {
            margin: 0 0 5px;
            color: #777;
        }
    </style>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false"><i class="fa-solid fa-table"></i>
                            Data
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="index.html">Peta Interaktif</a></li>
                            <li><a class="dropdown-item" href=" Kependudukan.html">Kependudukan</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" aria-disabled="true" data-bs-toggle="modal" data-bs-target="#infoModal"><i
                                class="fa-solid fa-circle-info"></i> Info</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Modal -->
    <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="infoModalLabel"><i class="fa-solid fa-circle-info"></i> Info</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Nama: Hayyu Rahmayani Puspitasari</p>
                    <p>NIM: 22/497739/SV/21157</p>
                    <P>Kelas: PGWEB A</P>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="card mt-4 shadow">
            <div class="card-header text-center">
                <h1>
                    <i class="fa-solid fa-map-location-dot"></i> PETA INTERAKTIF
                </h1>
            </div>
            <div class="card-body">
                <div id="map"></div>

                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

                <!-- Search JavaScript Library -->
                <script src="assets/plugins/leaflet-search/leaflet-search.js"></script>

                <!-- Geolocation Javascript Library -->
                <script
                    src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.min.js"></script>

                <!-- Leaflet Mouse Position JavaScript Library -->
                <script src="assets/plugins/leaflet-mouseposition/L.Control.MousePosition.js"></script>

                <!-- Leaflet Measure JavaScript Library -->
                <script src="assets/plugins/leaflet-measure/leaflet-measure.js"></script>

                <!-- EasyPrint JavaScript Library -->
                <script src="assets/plugins/leaflet-easyprint/leaflet.easyPrint.js"></script>

                <!-- Markercluster JavaScript Library -->
                <script src="assets/plugins/leaflet-markercluster/leaflet.markercluster.js"></script>
                <script src="assets/plugins/leaflet-markercluster/leaflet.markercluster-src.js"></script>

                <!-- Routing JavaScript Library -->
                <script src="assets/plugins/leaflet-routing/leaflet-routing-machine.js"></script>
                <script src="assets/plugins/leaflet-routing/leaflet-routing-machine.min.js"></script>

                <script>
                    var wfsgeoserver1 = L.geoJson(null, {

                        pointToLayer: function (feature, latlng) {
                            return L.marker(latlng, {
                                /* icon: L.icon({
                                iconUrl: "assets/img/marker/marker.png",
                                iconSize: [32, 32],
                                iconAnchor: [16, 32],
                                popupAnchor: [0, -32],
                                tooltipAnchor: [16, -20]
                                }) */
                            });
                        },
                        onEachFeature: function (feature, layer) {
                            var content =
                                "Kapanewon : " + feature.properties.kecamatan + "<br>" +
                                "Jumlah Penduduk: " + feature.properties.jumlah + " jiwa" + "<br>" +
                                "Kabupaten : " + "Sleman" + "<br>" +
                                "Provinsi : " + "Daerah Istimewa Yogyakarta";

                            layer.on({
                                click: function (e) {
                                    wfsgeoserver1.bindPopup(content).openPopup();
                                },
                                mouseover: function (e) {
                                    wfsgeoserver1
                                        .bindTooltip(feature.properties.kecamatan)
                                        .openTooltip();
                                },
                                mouseout: function (e) {
                                    wfsgeoserver1.closePopup();
                                    wfsgeoserver1.closeTooltip();
                                },
                            });
                        },

                    });

                    $.getJSON("wfsgeoserver1.php", function (data) {
                        wfsgeoserver1.addData(data);
                        wfsgeoserver1.addTo(map);
                        map.fitBounds(wfsgeoserver1.getBounds());
                    });
                    // Inisialisasi Peta
                    var map = L.map("map").setView([-7.7956, 110.3695], 10);

                    // Judul dan sub judul
                    var title = new L.Control();
                    title.onAdd = function (map) {
                        this._div = L.DomUtil.create("div", "info");
                        this.update();
                        return this._div;
                    };
                    title.update = function () {
                        this._div.innerHTML =
                            this._div.innerHTML = '<h2>KABUPATEN SLEMAN</h2> PROVINSI DAERAH ISTIMEWA YOGYAKARTA'
                    };
                    title.addTo(map);

                    // Legenda
                    L.Control.Legend = L.Control.extend({
                        onAdd: function (map) {
                            var img = L.DomUtil.create("img");
                            img.src = "assets/img/legend/legend.png";
                            img.style.width = "500px";
                            return img;
                        },
                    });
                    L.control.Legend = function (opts) {
                        return new L.Control.Legend(opts);
                    };

                    L.control.Legend({ position: "bottomleft" }).addTo(map);

                    // Watermark
                    L.Control.Watermark = L.Control.extend({
                        onAdd: function (map) {
                            var img = L.DomUtil.create("img");
                            img.src = "assets/img/logo/LOGO_SIG_BLUE.png";
                            img.style.width = "100px";
                            return img;
                        },
                    });
                    L.control.watermark = function (opts) {
                        return new L.Control.Watermark(opts);
                    };

                    L.control.watermark({ position: "topleft" }).addTo(map);

                    // Basemap
                    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
                        maxZoom: 19,
                        attribution:
                            'Map data ©️ <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    }).addTo(map);

                    var basemap1 = L.tileLayer(
                        "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
                        {
                            attribution:
                                '<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | <a href="DIVSIGUGM" target="_blank">DIVSIG UGM</a>',
                        }
                    );

                    var basemap2 = L.tileLayer(
                        "https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",
                        {
                            attribution:
                                'Tiles &copy; Esri | <a href="Latihan WebGIS" target="_blank">DIVSIG UGM</a>',
                        }
                    );

                    var basemap3 = L.tileLayer(
                        "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
                        {
                            attribution:
                                'Tiles &copy; Esri | <a href="Latihan WebGIS" target="_blank">DIVSIG UGM</a>',
                        }
                    );

                    var basemap4 = L.tileLayer(
                        "https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",
                        {
                            attribution:
                                '&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',
                        }
                    );

                    basemap3.addTo(map);

                    var baseMaps = {
                        "OpenStreetMap": basemap1,
                        "Esri World Street": basemap2,
                        "Esri Imagery": basemap3,
                        "Stadia Dark Mode": basemap4
                    };

                    L.control.layers(baseMaps).addTo(map);

                    // Plugin Search
                    var searchControl = new L.Control.Search({
                        position: "topleft",
                        layer: wfsgeoserver1, //Nama variabel layer
                        propertyName: "kecamatan", //Field untuk pencarian
                        marker: false,
                        moveToLocation: function (latlng, title, map) {
                            var zoom = map.getBoundsZoom(latlng.layer.getBounds());
                            map.setView(latlng, zoom);
                        },
                    });
                    searchControl
                        .on("search:locationfound", function (e) {
                            e.layer.setStyle({
                                fillColor: "#ffff00",
                                color: "#0000ff",
                            });
                        })
                        .on("search:collapse", function (e) {
                            featuresLayer.eachLayer(function (layer) {
                                featuresLayer.resetStyle(layer);
                            });
                        });
                    map.addControl(searchControl);

                    /*Plugin Geolocation */
                    var locateControl = L.control
                        .locate({
                            position: "topleft",
                            drawCircle: true,
                            follow: true,
                            setView: true,
                            keepCurrentZoomLevel: false,
                            markerStyle: {
                                weight: 1,
                                opacity: 0.8,
                                fillOpacity: 0.8,
                            },
                            circleStyle: {
                                weight: 1,
                                clickable: false,
                            },
                            icon: "fas fa-crosshairs",
                            metric: true,
                            strings: {
                                title: "Click for Your Location",
                                popup: "You're here. Accuracy {distance} {unit}",
                                outsideMapBoundsMsg: "Not available",
                            },
                            locateOptions: {
                                maxZoom: 16,
                                watch: true,
                                enableHighAccuracy: true,
                                maximumAge: 10000,
                                timeout: 10000,
                            },
                        })
                        .addTo(map);

                    /*Plugin Mouse Position Coordinate */
                    L.control
                        .mousePosition({
                            position: "bottomright",
                            separator: ",",
                            prefix: "Point Coodinate: ",
                        })
                        .addTo(map);

                    /*Plugin Measurement Tool */
                    var measureControl = new L.Control.Measure({
                        position: "topleft",
                        primaryLengthUnit: "meters",
                        secondaryLengthUnit: "kilometers",
                        primaryAreaUnit: "hectares",
                        secondaryAreaUnit: "sqmeters",
                        activeColor: "#FF0000",
                        completedColor: "#00FF00",
                    });
                    measureControl.addTo(map);

                    /*Plugin EasyPrint */
                    L.easyPrint({
                        title: "Print",
                    }).addTo(map);

                    /* Plugin Routing */
                    L.Routing.control({
                        waypoints: [
                            L.latLng(-7.77474, 110.37506),
                            L.latLng(-7.96500, 110.60076)
                        ],
                        routeWhileDragging: true
                    }).addTo(map);


                </script>
            </div>
        </div>
    </div>
    </div>

    <hr>
    <div class="container">
        <div class="row text-center">
            <div class="col-sm-4">
                <img src="/pgweb-acara10/jih.jpg" style="width:80%">
                <div class="caption">
                    <a href="faskes.html"
                        target="_blank">Fasilitas Kesehatan</a></p>
                </div>
            </div>
            <div class="col-sm-4">
                <img src="/pgweb-acara10/logo_sleman.png" style="width:45%">
                <div class="caption">
                    <a href="https://slemankab.go.id/"
                        target="_blank">Pemerintahan</a></p>
                </div>
            </div>
            <div class="col-sm-4">
                <img src="/pgweb-acara10/prambanan.jpg" style="width:80%">
                <div class="caption">
                    <a href="pariwisata.html"
                        target="_blank">Pariwisata</a></p>
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mt-2">
        <small class="text-primary">hayyurahmayani @2023</small>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>